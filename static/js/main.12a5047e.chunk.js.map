{"version":3,"sources":["components/Searchbar/Searchbar.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","components/ImageGallery/ImageGallery.module.css","components/Button/Button.module.css","components/Loader/Loader.module.css","components/Searchbar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Button/Button.js","components/Modal/Modal.js","components/Loader/Loader.js","service/Api.js","App.js","index.js"],"names":["module","exports","Searchbar","state","value","handleChange","e","setState","target","handleSubmit","preventDefault","trim","props","onSubmit","toast","error","position","autoClose","theme","className","s","this","type","SearchButton","SearchForm","autoComplete","placeholder","onChange","Component","ImageGalleryItem","webformatURL","showImageHandle","src","alt","ImageGalleryItemImage","onClick","propType","img","PropTypes","string","isRequired","func","ImageGallery","images","showImageHandler","map","index","id","largeImageURL","Button","loadMoreHandler","modalRoot","document","querySelector","Modal","keyDownHandler","code","onClose","clickOverlay","currentTarget","window","addEventListener","removeEventListener","createPortal","Overlay","largeImgURL","Loader","color","height","width","fetchImages","searchItem","page","a","fetch","rawResult","ok","json","result","App","searchImage","openModal","isLoading","maxPages","newElementHight","closeModal","imageUrl","scrollToHandler","top","documentElement","scrollHeight","setTimeout","scrollTo","behavior","searchImagesHandler","total","Math","ceil","totalHits","hits","info","console","toString","min","onSubmitHandler","searchString","prevProps","prevState","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.12a5047e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__21VNw\",\"SearchForm\":\"Searchbar_SearchForm__2loZC\",\"SearchButton\":\"Searchbar_SearchButton__3FOyx\",\"animate\":\"Searchbar_animate__1-VMT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__2tgg8\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__1czcK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__lrIzO\",\"Modal\":\"Modal_Modal__3tWXt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__1OoxJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__3QmkX\",\"animate\":\"Button_animate__Y294a\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Loader\":\"Loader_Loader__wrLus\"};","import s from \"./Searchbar.module.css\";\r\nimport { toast } from \"react-toastify\";\r\nimport { Component } from \"react\";\r\n\r\nclass Searchbar extends Component {\r\n  state = {\r\n    value: \"\",\r\n  };\r\n  handleChange = (e) => {\r\n    this.setState({ value: e.target.value });\r\n  };\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (this.state.value.trim() === \"\") {\r\n      toast.error(\"Please enter your search term!\", {\r\n        position: \"top-right\",\r\n        autoClose: 3000,\r\n        theme: \"dark\",\r\n      });\r\n      return;\r\n    }\r\n    this.props.onSubmit(this.state.value);\r\n    this.setState({ value: \"\" });\r\n  };\r\n  render() {\r\n    return (\r\n      <header className={s.Searchbar}>\r\n        <form onSubmit={this.handleSubmit}>\r\n          <button type=\"submit\" className={s.SearchButton}>\r\n            Search\r\n          </button>\r\n          <input\r\n            className={s.SearchForm}\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            placeholder=\"Search images and photos\"\r\n            onChange={this.handleChange}\r\n            value={this.state.value}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Searchbar;","import s from \"./ImageGalleryItem.module.css\";\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst ImageGalleryItem = ({ webformatURL, showImageHandle }) => {\r\n      return (\r\n      <li className={s.ImageGalleryItem}>\r\n        <img\r\n          src={webformatURL}\r\n          alt=\"\"\r\n          className={s.ImageGalleryItemImage}\r\n          onClick={showImageHandle}\r\n        />\r\n      </li>\r\n    );\r\n  };\r\n\r\nImageGalleryItem.propType = {\r\n  img: PropTypes.string.isRequired,\r\n  showImageHandle: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ImageGalleryItem;\r\n","import s from \"./ImageGallery.module.css\";\r\nimport React from \"react\";\r\nimport ImageGalleryItem from \"../ImageGalleryItem/ImageGalleryItem\";\r\n\r\nconst ImageGallery = ({ images, showImageHandler }) => {\r\n      return (\r\n      <ul className={s.ImageGallery}>\r\n        {images.map(({ id, webformatURL, largeImageURL }, index) => {\r\n          return (\r\n            <ImageGalleryItem\r\n              key={id}\r\n              webformatURL={webformatURL}\r\n              showImageHandle={showImageHandler(largeImageURL)}\r\n              index={index}\r\n            />\r\n          );\r\n        })}\r\n      </ul>\r\n    );\r\n}\r\n\r\nexport default ImageGallery;\r\n","import s from \"./Button.module.css\";\r\nimport { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nclass Button extends Component {\r\n  render() {\r\n    return (\r\n      <button\r\n        type=\"button\"\r\n        className={s.Button}\r\n        onClick={this.props.loadMoreHandler}\r\n      >\r\n        Load more\r\n      </button>\r\n    );\r\n  }\r\n}\r\n\r\nButton.propType = {\r\n  loadMoreHandler: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Button;\r\n","import s from \"./Modal.module.css\";\r\nimport { Component } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\n\r\nconst modalRoot = document.querySelector(\"#modal-root\");\r\n\r\nclass Modal extends Component {\r\n  componentDidMount() {\r\n    window.addEventListener(\"keydown\", this.keyDownHandler);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"keydown\", this.keyDownHandler);\r\n  }\r\n\r\n  keyDownHandler = (e) => {\r\n    if (e.code === \"Escape\") {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n  clickOverlay = (e) => { \r\n    if (e.currentTarget === e.target) {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return createPortal(\r\n      <div className={s.Overlay} onClick={this.clickOverlay}>\r\n        <div className={s.Modal}>\r\n          <img src={this.props.largeImgURL} alt=\"\" />\r\n        </div>\r\n      </div>,\r\n      modalRoot\r\n    );\r\n  }\r\n}\r\n\r\nexport default Modal;\r\n","import s from \"./Loader.module.css\";\r\nimport Spinner from \"react-loader-spinner\";\r\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\r\n\r\nconst Loader = () => {\r\n  return (\r\n    <div className={s.Loader}>\r\n      <Spinner type=\"Circles\" color=\"#00BFFF\" height={80} width={80} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Loader;\r\n","const API_KEY = `23121176-a6e266cf1dd110f625e6378e3`;\r\nconst BASE_URL = 'https://pixabay.com/api/';\r\n\r\n\r\nconst fetchImages = async (searchItem, page) => {\r\n  const rawResult = await fetch(\r\n    `${BASE_URL}?q=${searchItem}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`,\r\n  );\r\n\r\n  if (!rawResult.ok) {\r\n    throw rawResult;\r\n  }\r\n\r\n  const result = await rawResult.json();\r\n\r\n  return result;\r\n};\r\n\r\nexport default fetchImages;","import React, { Component } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport { ToastContainer } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nimport Searchbar from \"./components/Searchbar/Searchbar\";\r\nimport ImageGallery from \"./components/ImageGallery/ImageGallery\";\r\nimport Button from \"./components/Button/Button\";\r\nimport Modal from \"./components/Modal/Modal\";\r\nimport Loader from \"./components/Loader/Loader\";\r\n\r\nimport fetchImages from \"./service/Api\";\r\n\r\nclass App extends Component {\r\n  state = {\r\n    images: [],\r\n    searchImage: \"\",\r\n    openModal: false,\r\n    isLoading: false,\r\n    page: 1,\r\n    error: \"\",\r\n  };\r\n\r\n  maxPages = 0;\r\n  largeImgURL = \"\";\r\n  newElementHight = 0;\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (\r\n      (prevState.searchImage !== this.state.searchImage &&\r\n        this.state.searchImage !== \"\") ||\r\n      prevState.page !== this.state.page\r\n    ) {\r\n      this.searchImagesHandler();\r\n    }\r\n  }\r\n\r\n  closeModal = () => {\r\n    this.largeImgURL = \"\";\r\n    this.setState({ openModal: false });\r\n  };\r\n\r\n  showImageHandler = (imageUrl) => () => {\r\n    this.largeImgURL = imageUrl;\r\n    this.setState({ openModal: true });\r\n  };\r\n\r\n  scrollToHandler = () => {\r\n    const top = document.documentElement.scrollHeight - 150;\r\n\r\n    setTimeout(() => {\r\n      window.scrollTo({\r\n        top,\r\n        behavior: \"smooth\",\r\n      });\r\n    }, 500);\r\n  };\r\n\r\n  searchImagesHandler = async () => {\r\n    const { searchImage, page } = this.state;\r\n    this.setState({ isLoading: true, error: \"\" });\r\n    try {\r\n      const result = await fetchImages(searchImage, page);\r\n\r\n      if (result.total !== 0) {\r\n        this.maxPages = Math.ceil(result.totalHits / 12);\r\n\r\n        this.setState(({ images }) => ({\r\n          images: [...images, ...result.hits],\r\n        }));\r\n      } else {\r\n        toast.info(`Nothing found for ${searchImage}!`, {\r\n          position: \"top-right\",\r\n          autoClose: 3000,\r\n          theme: \"dark\",\r\n        });\r\n        this.setState(() => ({\r\n          images: [],\r\n        }));\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      this.setState(() => ({ error: error.toString() }));\r\n    } finally {\r\n      this.setState({ isLoading: false });\r\n    }\r\n  };\r\n\r\n  loadMoreHandler = () => {\r\n    this.scrollToHandler();\r\n    this.setState(() => ({\r\n      page: Math.min(this.maxPages, this.state.page + 1),\r\n    }));\r\n  };\r\n\r\n  onSubmitHandler = (searchString) => {\r\n    this.maxPages = 0;\r\n\r\n    this.setState(() => ({\r\n      images: [],\r\n      searchImage: searchString,\r\n      page: 1,\r\n    }));\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <ToastContainer autoClose={3000} />\r\n        <Searchbar onSubmit={this.onSubmitHandler} />\r\n        {this.state.openModal && (\r\n          <Modal\r\n            largeImgURL={this.largeImgURL}\r\n            onClose={this.closeModal}\r\n          ></Modal>\r\n        )}\r\n        {this.state.error ? (\r\n          <p>{this.state.error}</p>\r\n        ) : (\r\n          <ImageGallery\r\n            images={this.state.images}\r\n            showImageHandler={this.showImageHandler}\r\n            scrollToHandler={this.scrollToHandler}\r\n          />\r\n        )}\r\n        {this.state.isLoading && <Loader />}\r\n        {this.state.page < this.maxPages && (\r\n          <Button loadMoreHandler={this.loadMoreHandler} />\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}